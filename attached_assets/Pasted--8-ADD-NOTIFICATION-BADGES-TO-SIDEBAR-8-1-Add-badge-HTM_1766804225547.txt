## 8. ADD NOTIFICATION BADGES TO SIDEBAR

### 8.1 Add badge HTML to Feedback menu item:

Find the Feedback sidebar link and add a badge:
```html
<a href="#feedback" class="flex items-center gap-3 px-4 py-2.5 rounded-lg hover:bg-slate-700 relative">
  <svg>...</svg>
  <span>Feedback</span>
  <!-- Notification badge -->
  <span id="feedback-badge" class="hidden absolute right-2 min-w-[20px] h-5 px-1.5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center">
    0
  </span>
</a>
```

### 8.2 Add badge to Reviews menu item (for future):
```html
<a href="#reviews" class="flex items-center gap-3 px-4 py-2.5 rounded-lg hover:bg-slate-700 relative">
  <svg>...</svg>
  <span>Reviews</span>
  <!-- Notification badge -->
  <span id="reviews-badge" class="hidden absolute right-2 min-w-[20px] h-5 px-1.5 bg-orange-500 text-white text-xs font-bold rounded-full flex items-center justify-center">
    0
  </span>
</a>
```

### 8.3 Add JavaScript to update badges:
```javascript
// Update feedback badge
function updateFeedbackBadge() {
  fetch('/api/feedback/unread-count')
    .then(res => res.json())
    .then(data => {
      const badge = document.getElementById('feedback-badge');
      if (badge) {
        if (data.count > 0) {
          badge.textContent = data.count > 99 ? '99+' : data.count;
          badge.classList.remove('hidden');
        } else {
          badge.classList.add('hidden');
        }
      }
    })
    .catch(err => console.error('Badge update error:', err));
}

// Update reviews badge (for AI responses awaiting approval)
function updateReviewsBadge() {
  fetch('/api/reviews/pending-count')
    .then(res => res.json())
    .then(data => {
      const badge = document.getElementById('reviews-badge');
      if (badge) {
        if (data.count > 0) {
          badge.textContent = data.count > 99 ? '99+' : data.count;
          badge.classList.remove('hidden');
        } else {
          badge.classList.add('hidden');
        }
      }
    })
    .catch(err => console.error('Badge update error:', err));
}

// Update on page load
document.addEventListener('DOMContentLoaded', () => {
  updateFeedbackBadge();
  updateReviewsBadge();
  
  // Refresh every 60 seconds
  setInterval(updateFeedbackBadge, 60000);
  setInterval(updateReviewsBadge, 60000);
});
```

### 8.4 Add API endpoints:
```javascript
// GET /api/feedback/unread-count
router.get('/unread-count', async (req, res) => {
  try {
    const result = await pool.query(
      `SELECT COUNT(*) FROM feedback 
       WHERE user_id = $1 AND (status = 'new' OR status IS NULL)`,
      [req.session.userId]
    );
    res.json({ count: parseInt(result.rows[0].count) || 0 });
  } catch (error) {
    res.json({ count: 0 });
  }
});

// GET /api/reviews/pending-count
router.get('/pending-count', async (req, res) => {
  try {
    const result = await pool.query(
      `SELECT COUNT(*) FROM reviews 
       WHERE user_id = $1 AND ai_response IS NOT NULL AND approved = false`,
      [req.session.userId]
    );
    res.json({ count: parseInt(result.rows[0].count) || 0 });
  } catch (error) {
    res.json({ count: 0 });
  }
});
```

### 8.5 Add pulsing animation for attention (optional):
```css
@keyframes badge-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

#feedback-badge:not(.hidden), #reviews-badge:not(.hidden) {
  animation: badge-pulse 2s ease-in-out infinite;
}
```